---
audience: end-user
title: エンリッチメント アクティビティの使用
description: エンリッチメントアクティビティの使用方法を学ぶ
source-git-commit: ed642303540f5c2395e25dddfed20f2cb4970982
workflow-type: tm+mt
source-wordcount: '1123'
ht-degree: 76%

---

# エンリッチメント {#enrichment}

>[!CONTEXTUALHELP]
>id="dc_orchestration_enrichment"
>title="エンリッチメントアクティビティ"
>abstract="**エンリッチメント**&#x200B;アクティビティでは、データベースからの追加情報を使用してターゲットデータを強化できます。一般的に、セグメント化アクティビティ後のコンポジションで使用されます。"

>[!CONTEXTUALHELP]
>id="dc_orchestration_enrichment_data"
>title="エンリッチメントアクティビティ"
>abstract="エンリッチメントデータをコンポジションに追加したら、 **エンリッチメント** 行動、環境設定、選択に基づいて、プロファイルを個別のグループにセグメント化するアクティビティ。"

>[!CONTEXTUALHELP]
>id="dc_orchestration_enrichment_simplejoin"
>title="リンク定義"
>abstract="ワークテーブルデータと連合データベースの間にリンクを作成します。"

>[!CONTEXTUALHELP]
>id="dc_orchestration_enrichment_reconciliation"
>title="エンリッチメントの紐付け"
>abstract="調整パラメーターを設定します。"

>[!CONTEXTUALHELP]
>id="dc_targetdata_personalization_enrichmentdata"
>title="エンリッチメントデータ"
>abstract="コンポジションのエンリッチメントに使用するデータを選択します。 ターゲットディメンションから単一エンリッチメント属性、またはテーブル間の基数が 1～N を持つリンクの 2 種類のエンリッチメントデータから選択できます。"

この **エンリッチメント** アクティビティを使用すると、連合データベースからの追加情報でターゲットデータを強化できます。 一般的に、セグメント化アクティビティ後のコンポジションで使用されます。

エンリッチメントデータは次のいずれかを実行できます。

* **同じ作業用テーブルから** コンポジションにターゲット設定されているものとして、次に示します。

  *顧客のグループをターゲットに設定し、「生年月日」フィールドを現在の作業用テーブルに追加*

* **別の作業用テーブルから**：

  *顧客のグループをターゲットにし、「購入」テーブルから取得した「金額」フィールドと「製品のタイプ」フィールドを追加します*。

エンリッチメントデータをコンポジションに追加したら、 **エンリッチメント** 行動、好み、選択肢に基づいて顧客を個別のグループにセグメント化するアクティビティ。

<!--For instance, you can add to the working table information related to customers' purchases and use this data to personalize emails with their latest purchase or the amount spent on these purchases.-->

## エンリッチメントアクティビティの追加 {#enrichment-configuration}

次の手順に従って、**エンリッチメント**&#x200B;アクティビティを設定します。

1. **オーディエンスを作成**&#x200B;および&#x200B;**結合**&#x200B;アクティビティを追加します。
1. **エンリッチメント**&#x200B;アクティビティを追加します。
1. コンポジションに複数のトランジションが設定されている場合は、 **[!UICONTROL プライマリセット]** データを充実させるために、どのトランジションをプライマリセットとして使用するかを定義するフィールド。

## エンリッチメントデータを追加 {#enrichment-add}

1. 「**エンリッチメントデータを追加**」をクリックし、データのエンリッチメントに使用する属性を選択します。

   選択できるエンリッチメントデータには、ターゲットディメンションからの単一エンリッチメント属性と、コレクションリンクの 2 つのタイプがあります。これらの各タイプについて詳しくは、以下の例を参照してください。

   * [単一エンリッチメント属性](#single-attribute)
   * [コレクションリンク](#collection-link)

<!--
>[!NOTE]
>
>The **Edit expression button** in the attribute selection screen allows you to build advanced expressions to select the attribute. [Learn how to work with the expression editor](../../query/expression-editor.md)-->

## テーブル間のリンクを作成 {#create-links}

この **[!UICONTROL リンク定義]** セクションを使用すると、ワークテーブルデータとデータベースの間にリンクを作成できます。 例えば、受信者のアカウント番号、国および メールが含まれるファイルからデータを読み込む場合、プロファイル内の情報を更新するために国テーブルへのリンクを作成する必要があります。

使用可能なリンクには、次のいくつかのタイプがあります。

* **[!UICONTROL カーディナリティ 1 のシンプルリンク]**：プライマリセットの各レコードは、リンクされたデータの 1 個のレコードにのみ関連付けることができます。
* **[!UICONTROL カーディナリティ 0 または 1 のシンプルリンク]**：プライマリセットのレコードは、リンクされたデータの 0 または 1 個のレコードに関連付けることができますが、複数のレコードに関連付けることはできません。
* **[!UICONTROL カーディナリティ N のコレクションリンク]**：プライマリセットの各レコードは、リンクされたデータの 0、1、または（N）個以上 のレコードに関連付けることができます。

リンクを作成するには、次の手順に従います。

1. 「**[!UICONTROL リンクの定義]**」セクションで、「**[!UICONTROL リンクを追加]**」ボタンをクリックします。

1. **リレーションタイプ**&#x200B;ドロップダウンリストで、作成するリンクのタイプを選択します。

1. プライマリセットをリンクするターゲットを次のように識別します。

   * データベース内の既存のテーブルをリンクするには、「**[!UICONTROL データベーススキーマ]**」を選択し、「**[!UICONTROL ターゲットスキーマ]**」フィールドから目的のテーブルを選択します。
   * 入力トランジションからのデータとリンクするには、「**一時スキーマ**」を選択し、データを使用するトランジションを選択します。

1. プライマリセットのデータとリンクされたスキーマを一致させるための紐付け条件を定義します。使用可能な結合には、次の 2 つのタイプがあります。

   * **単純結合**：2 つのスキーマのデータを一致させるには、特定の属性を選択します。「**結合を追加**」をクリックし、紐付け条件として使用する&#x200B;**ソース**&#x200B;属性と&#x200B;**宛先**&#x200B;属性を選択します。
   * **高度な結合**：高度な条件を使用して結合を作成します。「**結合を追加**」をクリックし、「**条件を作成**」ボタンをクリックしてクエリモデラーを開きます。

リンクを使用したコンポジションサンプルは、 [例](#link-example) セクション。

## 例 {#example}

### 単一エンリッチメント属性 {#single-attribute}

ここでは、生年月日など、単一エンリッチメント属性を追加します。次の手順に従います。

1. 「**属性**」フィールド内をクリックします。
1. ターゲティングディメンションからシンプルなフィールド（この例では生年月日）を選択します。
1. 「**確認**」をクリックします。

### コレクションリンク {#collection-link}

この、より複雑なユースケースでは、テーブル間で 1-N の基数を持つリンクであるコレクションリンクを選択します。100 ドル未満の、最新 3 回の購入を取得します。そのためには、次を定義する必要があります。

* エンリッチメント属性：「**合計金額**」フィールド
* 取得する行の数：3
* フィルター：100 ドルを超える項目を除外
* 並べ替え：「**注文日付**」フィールドを降順で並び替え。

#### 属性を追加 {#add-attribute}

エンリッチメントデータとして使用するコレクションリンクを選択する場所です。

1. 「**属性**」フィールド内をクリックします。
1. 「**詳細属性を表示**」をクリックします。
1. **購入**&#x200B;テーブルから「**合計金額**」フィールドを選択します。

#### コレクション設定の定義{#collection-settings}

次に、データの収集方法と取得するレコード数を定義します。

1. **データの収集方法を選択**&#x200B;ドロップダウンで「**データを収集**」を選択します。
1. 「**取得する行（作成する列）**」フィールドに「3」と入力します。

例えば、顧客の平均購入額を取得する場合は、代わりに「**集計データ**」を選択し、「**集計関数**」ドロップダウンで「**平均**」を選択します。

#### フィルターの定義{#collection-filters}

ここでは、エンリッチメント属性の最大値を定義します。100 ドルを超える項目は除外します。 <!--[Learn how to work with the query modeler](../../query/query-modeler-overview.md)-->

1. 「**フィルターを編集**」をクリックします。
1. **合計金額**&#x200B;が存在し、かつ&#x200B;**合計金額**&#x200B;が 100 未満である、という 2 つのフィルターを追加します。最初のフィルターでは、NULL 値が最大値として表示されるようにフィルタリングします。
1. 「**確認**」をクリックします。

#### 並べ替えを定義{#collection-sorting}

**最新**&#x200B;の 3 つの購入を取得するには、並べ替えを適用する必要があります。

1. 「**並べ替えを有効にする**」オプションをアクティブ化します。
1. 「**属性**」フィールド内をクリックします。
1. 「**オーダー日**」フィールドを選択します。
1. 「**確認**」をクリックします。
1. **並べ替え**&#x200B;ドロップダウンから「**降順**」を選択します。


### リンク済みデータによるエンリッチメント {#link-example}

次の例は、2 つのトランジション間にリンクを作成するように設定されたコンポジションを示しています。 最初のトランジションは「クエリ」アクティビティを使用してプロファイルデータをターゲットにし、2 番目のトランジションには「ファイルを読み込み」アクティビティを通じて読み込んだファイルに保存された購入データが含まれます。

* 最初の「**エンリッチメント**」アクティビティでは、プライマリセット（「**クエリ**」アクティビティのデータ）を「**ファイルを読み込み**」アクティビティのスキーマにリンクします。これにより、クエリのターゲットになる各プロファイルを、対応する購入データと一致させられるようになります。
* 秒 **エンリッチメント** から取得した購入データでコンポジションテーブルのデータを強化するために、アクティビティが追加されます。 **ファイルをロード** アクティビティ。 これにより、これらのデータを追加のアクティビティに使用でき、例えば、購入に関する情報をお客様に送信するメッセージをパーソナライズできます。





<!--

Add other fields
use it in delivery


cardinality between the tables (1-N)
1. select attribute to use as enrichment data

    display advanced fields option
    i button

    note: attributes from the target dimension

1. Select how the data is collected
1. number of records to retrieve if want to retrieve a collection of multiple records
1. Apply filters and build rule

    select an existing filter
    save the filter for reuse
    view results of the filter visually or in code view

1. sort records using an attribute

leverage enrichment data in campaign

where we can use the enrichment data: personalize email, other use cases?

## Example

-->
